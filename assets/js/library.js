(function (root) {

  var _ = root._ || require('../vendor/underscore');
  
  var A = (root.allong && root.allong.es) || require('../vendor/allong.es.browser').allong.es;

  if (_.isUndefined(_.arity)) {
    require('../vendor/underscore-contrib');
  }

  var QuadTree = root.QuadTree || require('./quad-tree').QuadTree,
      Cell     = root.Cell     || require('./quad-tree').Cell

  if (_.isUndefined(QuadTree.prototype.toJSON)) {
    require('./json');
  }

  QuadTree.Library || (QuadTree.Library = {});

  _.extend(QuadTree.Library, {

    Block: QuadTree.fromString(
      '**',
      '**'
    ),

    Beehive: QuadTree.fromString(
      '........',
      '........',
      '....*...',
      '...*.*..',
      '...*.*..',
      '....*...',
      '........',
      '........'
    ),

    Glider: QuadTree.fromString(
      '........',
      '........',
      '........',
      '...***..',
      '.....*..',
      '....*...',
      '........',
      '........'
    ),
    
    Cross: QuadTree.fromString(
      '........',
      '........',
      '........',
      '...***..',
      '.....*..',
      '....*...',
      '........',
      '........'
    ),

    GosperGliderGun: QuadTree.fromString(
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '.....................................*..........................',
      '...................................*.*..........................',
      '.........................**......**............**...............',
      '........................*...*....**............**...............',
      '.............**........*.....*...**.............................',
      '.............**........*...*.**....*.*..........................',
      '.......................*.....*.......*..........................',
      '........................*...*...................................',
      '.........................**.....................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................',
      '................................................................'
    )

  });
  
  A.extendClass(Cell, {
    rotate: function () {
      return this;
    }
  });
  
  A.extendClass(QuadTree, {
    rotate: function () {
      return new QuadTree([
        this.sw().rotate(),
        this.nw().rotate(),
        this.ne().rotate(),
        this.se().rotate()
      ]);
    }
  });

})(this);